<h2 mat-dialog-title>Donner un feedback</h2>
<mat-dialog-content class="dialog-content">
  <p class="muted">
    {{ data.context === 'client' ? 'Pour le freelancer' : 'Pour le client' }} â€” {{ data.title }}
  </p>

  <div class="stars">
    <button
      type="button"
      mat-icon-button
      *ngFor="let s of stars"
      [class.active]="form.controls.rating.value >= s"
      (click)="setRating(s)"
      aria-label="Note {{ s }}">
      <mat-icon>{{ form.controls.rating.value >= s ? 'star' : 'star_border' }}</mat-icon>
    </button>
    <span class="score">{{ form.controls.rating.value }}/5</span>
  </div>
  <mat-error *ngIf="form.controls.rating.invalid && form.controls.rating.touched">
    Choisissez une note entre 1 et 5.
  </mat-error>

  <mat-form-field appearance="outline" class="field">
    <mat-label>Commentaire (min 10 caracteres)</mat-label>
    <textarea matInput rows="3" formControlName="comment" placeholder="Detaillez votre experience"></textarea>
    <mat-hint align="end">{{ form.controls.comment.value.length || 0 }}/2000</mat-hint>
    <mat-error *ngIf="form.controls.comment.invalid && form.controls.comment.touched">
      Commentaire requis (10 caracteres min).
    </mat-error>
  </mat-form-field>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-button type="button" (click)="cancel()">Annuler</button>
  <button mat-flat-button color="primary" type="button" (click)="submit()">Envoyer</button>
</mat-dialog-actions>
